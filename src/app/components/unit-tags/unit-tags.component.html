<div class="unit-tags" [class.compact]="mode() === 'compact'" [class.full]="mode() === 'full'">
    @if (mode() === 'full') {
        @for (tag of chassisTags(); track $index) {
            <span class="tag tag-chassis">{{ tag }}</span>
        }
        @for (tag of nameTags(); track $index) {
            <span class="tag tag-name">{{ tag }}</span>
        }
        @for (pt of publicTags(); track pt.publicId + ':' + pt.tag) {
            <span class="tag tag-public" [class.subscribed]="pt.subscribed" [title]="'From: ' + pt.publicId">{{ pt.tag }}</span>
        }
    }
    <a class="add-tag-btn" (click)="onTagClick($event)" title="Add tag" aria-label="Add tag">
        @if (mode() === 'compact') {
            @if (hasTags()) {
                <span class="tags-counter">{{ totalTagCount() }}</span>
                <svg fill="var(--bt-yellow)" width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                    <path d="M21.842 6.218a1.977 1.977 0 0 0-.424-.628A1.99 1.99 0 0 0 20 5H8c-.297 0-.578.132-.769.359l-5 6c-.309.371-.309.91 0 1.281l5 6c.191.228.472.36.769.36h12a1.977 1.977 0 0 0 1.41-.582A1.99 1.99 0 0 0 22 17V7c0-.266-.052-.525-.158-.782z" />
                </svg>
            } @else {
                <svg fill="none" stroke="currentColor" width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                    <path d="M21.842 6.218a1.977 1.977 0 0 0-.424-.628A1.99 1.99 0 0 0 20 5H8c-.297 0-.578.132-.769.359l-5 6c-.309.371-.309.91 0 1.281l5 6c.191.228.472.36.769.36h12a1.977 1.977 0 0 0 1.41-.582A1.99 1.99 0 0 0 22 17V7c0-.266-.052-.525-.158-.782z" stroke-width="1.5" />
                    <path d="M14 8V16M10 12H18" stroke-width="2" stroke-linecap="round" />
                </svg>
            }
        } @else {
            <svg fill="none" stroke="currentColor" width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                <path d="M21.842 6.218a1.977 1.977 0 0 0-.424-.628A1.99 1.99 0 0 0 20 5H8c-.297 0-.578.132-.769.359l-5 6c-.309.371-.309.91 0 1.281l5 6c.191.228.472.36.769.36h12a1.977 1.977 0 0 0 1.41-.582A1.99 1.99 0 0 0 22 17V7c0-.266-.052-.525-.158-.782z" stroke-width="1.5" />
                <path d="M14 8V16M10 12H18" stroke-width="2" stroke-linecap="round" />
            </svg>
        }
    </a>
</div>
